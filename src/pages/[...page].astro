---
import type { GetStaticPaths } from 'astro';
import { getCollection } from 'astro:content';
import GlobalLayout from '@layouts/GlobalLayout.astro';
import IndexPageLayout from '@layouts/IndexPageLayout.astro';
import PostList from '@components/PostList.astro';
import Pagination from '@components/Pagination.astro';

export const getStaticPaths = (async ({ paginate }) => {
  const posts = await getCollection('posts');
  return paginate(posts, {
    pageSize: 6,
  });
}) satisfies GetStaticPaths;

const { page } = Astro.props;

const pageTitle: { heading: string; subheading: string } = {
  heading: "I'm a frontend software developer based in Thessaloniki, Greece.",
  subheading:
    'I love clean and minimal interfaces, accessible homemade and local applications, and digital gardens.',
};
---

<GlobalLayout>
  <IndexPageLayout pageTitle={pageTitle}>
    <PostList posts={page.data} />
    <Pagination prevPage={page.url.prev} nextPage={page.url.next} />
  </IndexPageLayout>
</GlobalLayout>
