---
import type { Page } from '@utils/types';
import { customTypography } from '@utils/customTypography';
import { getEntry, render } from 'astro:content';
import GlobalWrapper from '@layouts/GlobalWrapper.astro';
import PageSplit from '@layouts/PageSplit.astro';
import TitleOneLine from '@components/title/TitleOneLine.astro';
import ImageWithCaption from '@components/embeds/ImageWithCaption.astro';
import MarkdownWrapper from '@layouts/MarkdownWrapper.astro';
import img from '@assets/about-me.jpg';

const aboutPage: Page | undefined = await getEntry('pages', 'about');
if (!aboutPage) {
  throw new Error('Could not find requested page');
}

const { Content } = await render(aboutPage);
---

<GlobalWrapper pageTitle={aboutPage.data.title}>
  <PageSplit>
    <TitleOneLine slot="title" pageTitle={{ heading: aboutPage.data.title }} />
    <ImageWithCaption
      slot="content-left"
      src={img}
      caption="A portrait of me in England"
    />
    <MarkdownWrapper slot="content-right" hasBottomSection={false}>
      <Content slot="content" components={customTypography} />
    </MarkdownWrapper>
  </PageSplit>
</GlobalWrapper>
